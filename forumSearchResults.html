<!doctype html>

<head>
	<title>Forum Search Results</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/introHCI.css" rel="stylesheet" />
	<link href="css/map.css" rel="stylesheet" />
</head>

<body>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

		<img src="forum_results_pic.jpg" style='position:fixed;
		top:0px;
		left:0px;
		width:100%;
		height:100%;
		z-index:-1;'>


		<div class="nav">
			<div class="navigation">
				<a class=left href="index.html">Communal Cooking</a>
				<container id="searchNav">
					<form name="myform" id="myform" action="" method="get">
						Find<input id="query" type="text" placeholder="Ingredients or tools"></input>
						Near <input id="address" type="text" placeholder="City, State">
						<a href="mapsPage.html" data-role="button" id="submit" onclick="processSearch();" value="Search">Search</a>
	        <script>
	          var input = document.getElementById("address");
	          input.addEventListener("keyup", function(event) {
	          event.preventDefault();
	          if (event.keyCode === 13) {
	          document.getElementById("submit").click();
	          }
	          });
	        </script>
	      </container>
	      <a class=right href="forum.html">Forum</a>
	    </div>

	      <div class = "dropdown">
	      <p>Account</p>
	        <ul class = "dropdown-menu">
	          <li><a href="profileLogin.html">Login/Signup</a></li>
	          <li><a href="profile.html">Profile</a></li>
	        </ul>
	      </div>
	    </div>

		<div>
	<script>
			var myData = localStorage['objectToPass'];
			localStorage.removeItem( 'objectToPass' ); // Clear the localStorage
			var query = myData[0];
			var address = myData[1];
			//alert('firstData: ' + firstData + '\nsecondData: ' + secondData);
		</script>


			<script>
				//var input = localStorage.getItem("query");
				var address = localStorage.getItem("address");
				function initMap() {
					var latitude;
				  var longitude;
					var geocoder = new google.maps.Geocoder();
					var address = localStorage.getItem("address");
					geocoder.geocode( { 'address': address}, function(results, status) {
					if (status == google.maps.GeocoderStatus.OK) {
							latitude = results[0].geometry.location.lat();
							localStorage.setItem( 'latitude', latitude);
							longitude = results[0].geometry.location.lng();
							localStorage.setItem( 'longitude', longitude);
						}
					});
					var latitude = localStorage.getItem("latitude");
					var longitude = localStorage.getItem('longitude');
					latitude = localStorage.getItem("latitude");
					longitude = localStorage.getItem("longitude");
					alert(latitude);
					// DO NOT DO THIS IN PRODUCTION CODE
					// SANITIZE YOUR STRINGS IN LOCAL STORAGE BEFORE PARSING
					var map = new google.maps.Map(document.getElementById('map'), {
				  zoom: 8,
				  center: {lat: parseFloat(latitude), lng: parseFloat(longitude)}
				});
			document.getElementById('submit').addEventListener('click', function() {
			  geocodeAddress(geocoder, map);
			});
		  }
			  </script>

	<!-- CONTENT FOR PAGE -->

		<div class="searchbar" style="margin-top: 20px; margin-left: 75px;">
				<form name="myform2" id="myform2" method="get">
			<input id="myQuestion" type="search" placeholder="Ask another question..."></input>
			<a href="forumSearchResults.html" data-role="button" id="submit2" onclick="processSearch2();" value="Search">Search</a>
			<script>
				var input = document.getElementById("myQuestion");
				input.addEventListener("keyup", function(event) {
				event.preventDefault();
				if (event.keyCode === 13) {
				document.getElementById("submit2").click();
				}
				});
			</script>
		</div>

		<div class="containerForumAnswers">
				<div class="leftColForum">
					<div>
						<h4 style="margin-left: 75px;">
							Results for your question:
						</h4>
					</div>
							<script id="forumResultsTemplate" type="text/x-handlebars-template">
								<div class="forumResultsTemplate">


									<a href="{{profile}}">{{name}}</a>
									<!-- <a href="{{profile}}"></a><h3 style="margin: 0px; padding: opx; color: black;">{{name}}</h3></a> -->
									<br>{{Question}}
									<br><br><a href="{{link}}"><button class="viewThreadButton">View This Thread</button></a>

								</div>
								<br>
							</script>

							<div id="forumResults">
							<!-- forum results goes here -->
							</div>

							<!-- No results section -->
							<script id="noResultsTemplate" type="text/x-handlebars-template">
								<div class="noResultsTemplate">


									<p style="padding: 0px; margin-left: 75px;">{{result}}</p>

								</div>
							</script>

							<div style="margin-left: 50px;" id="noResults">
							<!-- forum results goes here -->
							</div>

							<br>

							<div>
								<p style ="margin-top: 0px; margin-left: 75px; padding: 0px;">Can't find what you're looking for? Post your own forum question to the community!</p>
							</div>

							<div class="forumInput" style="margin-left: 75px;">
								<form name="forumPost" id="forumPost" action="" method="get">
										<input class="forumQuestionComment" id="myPost" type="text" placeholder="Post your question...">
										<!--<a href="mapsPage.html"><button>Search</button></a>
										<input id="submit" type="button" value="Search" onclick="processSearch();" href="mapsPage.html">-->
										<a href="forumPost.html" data-role="button" id="submit3" onclick="makeForum();">Post</a>
										<script>
											var input = document.getElementById("myPost");
											input.addEventListener("keyup", function(event) {
											event.preventDefault();
											if (event.keyCode === 13) {
											document.getElementById("submit3").click();
											}
											});
										</script>
							</div>

							<!-- <div>
								<p style="padding: 0px; margin-left: 75px;">Didn't find what you're searching for? We're sorry! Please try again!</p>
							</div> -->
					</div>
				</div>

				<div class="rightColForum">
					<h4 style="margin: 0px;">Frequently asked questions</h4>
					</h3>
					<p class="forumLinks">
						<a href="forumAnswers8.html">What are some good gluten free banana bread recipes?</a>
						<br><a href="forumAnswers1.html">What kind of pan should I use to sear steak?</a>
						<br><a href="forumAnswers5.html">What are some must have knives??</a>
						<br><a href="forumAnswers9.html">Does anyone have a vegetarian jambalaya recipe?</a>
						<br><a href="forumAnswers10.html">Tips for doubling a recipe?</a>
					</p>
				</div>
			</div>



    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/handlebars-v4.0.11.js"></script>
	<script src="js/forumSearch.js"></script>
	<script src="js/search.js"></script>
	<script src="js/forumPost.js"></script>


</body>
