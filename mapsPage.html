<!doctype html>

<html>
<head>
	<title>Search Results Maps Page</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/introHCI.css" rel="stylesheet" />
	<link href="css/map.css" rel="stylesheet" />
</head>

<body>

	<div class="nav">
		<div class="navigation">
			<a class=left href="index.html">Home</a>
			<container id="searchNav">
				<form name="myform" id="myform" action="" method="get">
					Find <input type="text" placeholder="Ingredients, recipes, tools...">
					Near <input id="address" type="text" placeholder="Current location">
					<input id="submit" type="button" value="Search" onclick="processSearch();">
			</container>
			<a class=right href="profile.html">Profile</a>
			<a class=right href="forum.html">Forum</a>
		</div>
	</div>

	<div>
		<h1>
			Search Results for XXX
		</h1>
<!--<script>
		var myData = localStorage['objectToPass'];
		localStorage.removeItem( 'objectToPass' ); // Clear the localStorage
		var query = myData[0];
		var address = myData[1];
		//alert('firstData: ' + firstData + '\nsecondData: ' + secondData);
	</script>-->

		<!--https://developers.google.com/maps/documentation/javascript/examples/geocoding-simple-->
		<div id="map" style="width:400px;height:400px;"></div>
	    <script>
			function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 8,
          center: {lat: -34.397, lng: 150.644}
        });
        var geocoder = new google.maps.Geocoder();
				var address = document.getElementById('address').value;
				localStorage.setItem( 'address', address);

        document.getElementById('submit').addEventListener('click', function() {
          geocodeAddress(geocoder, map);
        });
      }

      /*function geocodeAddress(geocoder, resultsMap) {
				//var address = localStorage.getItem('customAddress');
        var address = document.getElementById('address').value;
				//localStorage.setItem('customAddress', address);
        geocoder.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
            resultsMap.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: resultsMap,
              position: results[0].geometry.location
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }*/
	  	</script>

		<p>
			Here are some neigbors who have what you're looking for!
		</p>
	</div>
	<div>
		<p>
			<a href="profile.html">1. Neighbor 1</a>
			<br> Address
			<br> X.XX miles away
		</p>
		<a href="messaging.html"><button type="button">Message</button></a>
	</div>
	<div>
		<p>
			<a href="profile.html">2. Neighbor 2</a>
			<br> Address
			<br> X.XX miles away
		</p>
		<a href="messaging.html"><button type="button">Message</button></a>
	</div>
	<div>
		<p>
			<a href="profile.html">3. Neighbor 3</a>
			<br> Address
			<br> X.XX miles away
		</p>
		<a href="messaging.html"><button type="button">Message</button></a>
	</div>

		<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBrsYMYyM3U9VvOXL06tT0VDgV1SJGtGp4&callback=initMap">
		</script>

		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/handlebars-v4.0.11.js"></script>
		<script src="js/search.js"></script>

</body>
</html>
